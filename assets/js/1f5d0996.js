import{a as y}from"./c6568b50.js";import{L as E}from"./8724f2fa.js";import{d as _,m as d,B as p,o as l,c as i,D as h,A as b,_ as v,l as x,C as F,H as L,a as g,F as w,b as C,t as A,x as k,y as D}from"./280a0e21.js";const I=["src"],T={key:2,class:"flase"},B=_({__name:"LoadingAfterImg",props:{url:null,width:{default:"80px"},height:{default:"100px"}},setup(n){const t=u=>y({method:"get",url:u,responseType:"arraybuffer"}).then(c=>"data:image/png;base64,"+btoa(new Uint8Array(c.data).reduce((r,a)=>r+String.fromCharCode(a),""))).catch(()=>null),e=d(null),s=d(!0);return p(()=>{t(n.url).then(u=>{s.value=!1,e.value=u}).catch(()=>{s.value=!1})}),(u,c)=>(l(),i("div",{class:"loading-after-img",style:b({width:n.width,height:n.height})},[s.value?(l(),h(E,{key:0,scale:".8"})):e.value!=null?(l(),i("img",{key:1,src:e.value,alt:""},null,8,I)):(l(),i("div",T,"\u52A0\u8F7D\u5931\u8D25"))],4))}});const j=v(B,[["__scopeId","data-v-0b97d5f7"]]),S=n=>(k("data-v-04dbb4ba"),n=n(),D(),n),H={class:"gallery"},M=S(()=>g("h2",null,"\u56FE\u5E93",-1)),G={class:"content"},R=_({__name:"indexGallery",setup(n){const t={count:52,path:"../assets/imgs/gallery/",imgs:["\u697C\u89D2.jpg","\u5C71\u6CB3\u4E0E\u4F60.jpg","\u9493\u661F\u661F.jpg"],imgsRandom:["\u697C\u89D2.jpg","\u5C71\u6CB3\u4E0E\u4F60.jpg","\u9493\u661F\u661F.jpg"]};(()=>{let a=t.imgsRandom.length;for(let o=0;o<t.count;o++)t.imgs.push(t.imgsRandom[Math.floor(Math.random()*a)])})();const e=x({success:0,path:"../assets/imgs/gallery/",imgs:[]}),s=d(null),u=d("\u4E0A\u6ED1\u52A0\u8F7D\u66F4\u591A"),c=a=>{t.count>e.success&&document.documentElement.scrollHeight-100<document.documentElement.scrollTop+document.documentElement.clientHeight&&(e.imgs.push(e.path+t.imgs[e.success]),e.success++)},r=()=>{s.value&&c(s.value)};return p(()=>{let a=[];for(let o=0;o<t.count;o++)a.push(setTimeout(()=>{document.documentElement.scrollHeight-80>=document.documentElement.scrollTop+document.documentElement.clientHeight&&a.forEach(m=>clearTimeout(m)),s.value&&c(s.value)},0));window.addEventListener("scroll",r),F(()=>e.success,o=>{o>=t.count&&(removeEventListener("scroll",r),u.value="\u5230\u5E95\u5566\uFF01")})}),L(()=>{s.value&&window.removeEventListener("scroll",r)}),(a,o)=>(l(),i("div",H,[M,g("div",G,[(l(!0),i(w,null,C(e.imgs,(m,f)=>(l(),h(j,{url:m,key:f},null,8,["url"]))),128)),g("div",{class:"bottom-tip",ref_key:"Tip",ref:s},A(u.value),513)])]))}});const z=v(R,[["__scopeId","data-v-04dbb4ba"]]);export{z as default};
