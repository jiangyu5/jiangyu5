import{a as E}from"./c6568b50.js";import{L as y}from"./5669bb98.js";import{d as g,m as d,B as p,o as u,c as i,D as h,_ as v,l as F,C as x,I as L,a as _,F as C,b as I,t as k,x as w,y as A}from"./7f1ab414.js";const D={class:"loading-after-img"},T=["src"],b={key:2,class:"flase"},B=g({__name:"LoadingAfterImg",props:{url:null,width:null,height:null},setup(l){const s=a=>E({method:"get",url:a,responseType:"arraybuffer"}).then(c=>"data:image/png;base64,"+btoa(new Uint8Array(c.data).reduce((r,o)=>r+String.fromCharCode(o),""))).catch(()=>null),e=d(null),n=d(!0);return p(()=>{s(l.url).then(a=>{e.value=a,n.value=!1}).catch(()=>{n.value=!1})}),(a,c)=>(u(),i("div",D,[n.value?(u(),h(y,{key:0,scale:".8"})):e.value!=null?(u(),i("img",{key:1,src:e.value,alt:""},null,8,T)):(u(),i("div",b,"\u52A0\u8F7D\u5931\u8D25"))]))}});const j=v(B,[["__scopeId","data-v-ca60b4fa"]]),G=l=>(w("data-v-6a584e57"),l=l(),A(),l),S={class:"gallery"},H=G(()=>_("h2",null,"\u56FE\u5E93",-1)),M={class:"content"},$=g({__name:"indexGallery",setup(l){const s={count:60,path:"../assets/imgs/gallery/",imgs:["\u697C\u89D2.jpg","\u5C71\u6CB3\u4E0E\u4F60.jpg","\u9493\u661F\u661F.jpg"],imgsRandom:["\u697C\u89D2.jpg","\u5C71\u6CB3\u4E0E\u4F60.jpg","\u9493\u661F\u661F.jpg"]};(()=>{let o=s.imgsRandom.length;for(let t=0;t<s.count;t++)s.imgs.push(s.imgsRandom[Math.floor(Math.random()*o)])})();const e=F({success:0,onceGet:6,path:"../assets/imgs/gallery/",imgs:[]}),n=d(null),a=d("\u4E0A\u6ED1\u52A0\u8F7D\u66F4\u591A"),c=o=>{if(s.count>e.success&&document.documentElement.scrollHeight-20<document.documentElement.scrollTop+document.documentElement.clientHeight)for(let t=0;t<e.onceGet;t++)e.imgs.push(e.path+s.imgs[e.success]),e.success++},r=()=>{n.value&&c(n.value)};return p(()=>{let o=[];for(let t=0;t<s.count;t++)o.push(setTimeout(()=>{document.documentElement.scrollHeight-20>=document.documentElement.scrollTop+document.documentElement.clientHeight&&o.forEach(m=>clearTimeout(m)),n.value&&c(n.value)},0));window.addEventListener("scroll",r),x(()=>e.success,t=>{t>=s.count&&(removeEventListener("scroll",r),a.value="\u5230\u5E95\u5566\uFF01")})}),L(()=>{n.value&&window.removeEventListener("scroll",r)}),(o,t)=>(u(),i("div",S,[H,_("div",M,[(u(!0),i(C,null,I(e.imgs,(m,f)=>(u(),h(j,{url:m,key:f},null,8,["url"]))),128))]),_("div",{class:"bottom-tip",ref_key:"Tip",ref:n},k(a.value),513)]))}});const N=v($,[["__scopeId","data-v-6a584e57"]]);export{N as default};
